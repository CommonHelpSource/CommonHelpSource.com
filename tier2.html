<!DOCTYPE html>
<html>
<head>
  <title>Housing Assessment - Tier 2</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <h1>Tier 2: Financial and Housing Search Assessment</h1>
    <form id="tier2Form">
      <label>1. What is your approximate monthly income?</label><br>
      <select name="monthly_income" required>
        <option value="">--Select--</option>
        <option value="none">No income</option>
        <option value="<1000">Less than $1,000</option>
        <option value="1000-2000">$1,000–$2,000</option>
        <option value="2000-3000">$2,000–$3,000</option>
        <option value=">3000">More than $3,000</option>
      </select><br><br>

      <label>2. How much do you currently pay in rent or housing costs each month?</label><br>
      <select name="monthly_rent" required>
        <option value="">--Select--</option>
        <option value="none">I do not pay rent</option>
        <option value="<500">Less than $500</option>
        <option value="500-1000">$500–$1,000</option>
        <option value="1000-1500">$1,000–$1,500</option>
        <option value=">1500">More than $1,500</option>
      </select><br><br>

      <label>3. Are you actively searching for housing?</label><br>
      <select name="searching_housing" required>
        <option value="">--Select--</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <option value="not_sure">Not Sure</option>
      </select><br><br>

      <label>4. Have you applied to any subsidized or low-income housing programs?</label><br>
      <select name="applied_programs" required>
        <option value="">--Select--</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <option value="not_sure">Not Sure</option>
      </select><br><br>

      <button type="submit">Next</button>
    </form>
  </div>

  <script>
    document.getElementById("tier2Form").addEventListener("submit", function(event) {
      event.preventDefault();
      const form = event.target;
      const income = form.monthly_income.value;
      const rent = form.monthly_rent.value;
      const searching = form.searching_housing.value;
      const applied = form.applied_programs.value;

      localStorage.setItem("tier2_monthly_income", income);
      localStorage.setItem("tier2_monthly_rent", rent);
      localStorage.setItem("tier2_searching_housing", searching);
      localStorage.setItem("tier2_applied_programs", applied);

      let prompt = `I am helping someone search for affordable housing. Their monthly income is ${income}, and they can afford ${rent} in rent. `;
      prompt += (searching === "yes") ? "They are currently searching for housing. " : "They are not currently searching for housing. ";
      prompt += (applied === "yes") ? "They have applied for subsidized housing programs. " : "They have not yet applied to any subsidized housing programs. ";
      prompt += "Can you help me find housing options or filtered listings on Zillow or similar platforms that match this profile?";

      localStorage.setItem("chat_prompt", prompt);

      window.location.href = "print.html?tier=2";
    });
  </script>
</body>
</html>